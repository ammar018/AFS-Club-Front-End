<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue.js AFS Club</title>

    <!-- CSS file -->
    <link rel="stylesheet" href="css/styles.css" />

    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

    <!-- Vue.js CDN for frontend logic -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js"></script>
    <script src="./vue/product.js"></script>
  </head>
  <body>
    <!-- Root Vue.js App Container -->
    <div id="app">
      <!-- Header Section -->
      <header>
        <h1>
          <div v-on:click="toggleHome">
            <img
              src="images/logo.png"
              alt="AFS Logo"
              style="width: 40px; height: 40px; vertical-align: middle; margin-right: 10px"
            />
            {{ sitename }}
          </div>
        </h1>

        <!-- Search Bar -->
        <form class="search-bar">
          <input type="text" placeholder="Search..." class="search-input" v-model="searchQuery" />
          <button type="submit" class="search-button">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </header>
      <!-- Main Product Section -->
      <main>
        <section id="product-section" class="fade-in">
          <div id="product-section" v-if="!showCheckoutForm">
            <!-- Product Display Section -->
            <div class="product-container">
              <div
                class="product-box"
                v-for="product in filteredAndSortedProducts"
                :key="product.id"
                @mouseover="hoveredProduct = product.id"
                @mouseleave="hoveredProduct = null"
              >
                <figure>
                  <img :src="product.image" alt="Product Image" />
                </figure>
                <h2>{{ product.title }}</h2>
                <p>Location: {{ product.location }}</p>
                <p>Price: ${{ product.price }}</p>
                <p>Availability: {{ product.availableInventory }}</p>

                <!-- Rating with Stars -->
                <div>
                  <span v-for="n in product.rating" :key="'filled' + n">★</span>
                  <span v-for="n in (5 - product.rating)" :key="'empty' + n">☆</span>
                </div>

                <!-- Inventory Message -->
                <span v-if="product.availableInventory === cartCount(product.id)">All out!</span>
                <span v-else>Buy now!</span>

                <!-- Product Description -->
                <p class="description">{{ product.description }}</p>

                <!-- Add to Cart Button -->
                <button class="add-to-cart" @click="addToCart(product)" v-if="canAddToCart(product)">
                  Add to Cart
                </button>
                <button class="add-to-cart" disabled v-else>Add to Cart</button>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
    <!-- Footer Section -->
    <footer class="footer">
      <p>&copy; 2024 All rights reserved | AFS Club</p>
    </footer>
    <script>
      var webstore = new Vue({
        el: "#app",
        data: {
          sitename: "AFS Club",
          products: products,
          cart: [],
          searchQuery: "",
          sortBy: "subject",
          sortOrder: "asc",
        },
        methods: {
          search() {
            console.log(`Searching for: ${this.searchQuery}`);
          },
          toggleCart() {
            this.cartOpen = !this.cartOpen;
          },
          toggleHome() {
            this.showCheckoutForm = false;
          },
        },
      });
    </script>
  </body>
</html>
